(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],{495:function(e,t){},547:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(337),i=n(5),a=n(17),s=n(129),o=n(87),u=n(4),j=n(103),l=n(8),b=n(13),d=n(344),f=n.n(d),g=n(345),p=n.n(g),O={API:{endpoints:[{name:"meetingApi",endpoint:"https://tfkjfz4i18.execute-api.us-east-1.amazonaws.com/prod/"}]}},m=n(49),h=n(573),x=(n(493),n(16));m.a.configure(O),m.a.Logger.LOG_LEVEL="DEBUG",console.log(O.API);var v=function(){var e=Object(a.t)(),t=Object(c.useState)([]),n=Object(l.a)(t,2),r=n[0],i=n[1],d=Object(c.useState)(""),g=Object(l.a)(d,2),O=g[0],m=g[1],v=Object(a.u)(),w=Object(a.r)(),S=Object(c.useState)(""),k=Object(l.a)(S,2),y=k[0],M=k[1],A=Object(a.s)().toggleVideo,D=Object(c.useRef)(null);Object(c.useEffect)((function(){0!==r.length&&D.current&&(D.current.scrollTop=D.current.scrollHeight)}),[r.length]),Object(c.useEffect)((function(){function e(){return(e=Object(j.a)(Object(u.a)().mark((function e(){return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v!==a.m.Succeeded){e.next=3;break}return e.next=3,A();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[v]),Object(c.useEffect)((function(){if(w)return console.log("Audio Video found"),w.realtimeSubscribeToReceiveDataMessage("Message",(function(e){console.log(e);var t=(e&&e.json()||{}).message,n={message:t,timestamp:Date.now(),isSelf:!1};i((function(e){return[].concat(Object(o.a)(e),[n])})),console.log(t)})),function(){w.realtimeUnsubscribeFromReceiveDataMessage("Message")};console.log("No audioVideo")}),[w]);var L=function(e){if(w){var t={message:e},n={message:e,timestamp:Date.now(),isSelf:!0};i((function(e){return[].concat(Object(o.a)(e),[n])})),console.log("Sending message: ".concat(JSON.stringify(t))),w.realtimeSendDataMessage("Message",t,3e4)}},C={icon:Object(x.jsx)(a.k,{}),onClick:function(e){return I(e)},label:"Join"},E={icon:Object(x.jsx)(a.j,{}),onClick:function(e){return z(e)},label:"Leave"},T={icon:Object(x.jsx)(a.n,{}),onClick:function(e){return V(e)},label:"End"},z=function(){var t=Object(j.a)(Object(u.a)().mark((function t(){return Object(u.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.leave();case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),V=function(){var e=Object(j.a)(Object(u.a)().mark((function e(t){return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,h.a.post("meetingApi","end",{body:{meetingId:y}});case 4:i([]),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var t=Object(j.a)(Object(u.a)().mark((function t(n){var c,r,i;return Object(u.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,h.a.post("meetingApi","join",{});case 4:return c=t.sent,r=new b.MeetingSessionConfiguration(c.Meeting,c.Attendee),i={deviceLabels:a.f.AudioAndVideo},t.next=9,e.join(r,i);case 9:return t.next=11,e.start();case 11:e.invokeDeviceProvider(a.f.AudioAndVideo),M(c.Meeting.MeetingId),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(1),console.log(t.t0);case 18:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(e){return t.apply(this,arguments)}}();return Object(x.jsxs)(f.a,{children:[Object(x.jsx)(p.a,{title:"Amazon Chime SDK Meeting with Chat"}),Object(x.jsx)("div",{id:"video",children:Object(x.jsx)("div",{style:{padding:"1rem",height:"640px",width:"1080px",boxSizing:"border-box"},children:Object(x.jsxs)(a.h,{gridGap:[".25rem",".5rem"],gridTemplateColumns:{md:"3fr 1fr 4rem"},children:[Object(x.jsx)(a.p,{}),Object(x.jsx)("div",{ref:D,style:{overflowY:"auto"},children:Object(x.jsx)(a.g,{children:r.map((function(e){return Object(x.jsx)(a.c,{variant:e.isSelf?"outgoing":"incoming",marginLeft:"1rem",marginTop:"1rem",timestamp:new Date(e.timestamp).toLocaleTimeString(),showTail:!!e.isSelf,children:e.message},e.timestamp)}))})})]})})}),Object(x.jsx)("div",{style:{padding:"1rem",height:"20px",width:"1080px",boxSizing:"border-box"},children:Object(x.jsxs)(a.h,{gridGap:[".25rem",".5rem"],gridTemplateColumns:{md:"3fr 1fr 4rem"},children:[" ",Object(x.jsx)(a.g,{children:Object(x.jsxs)(a.d,{showLabels:!0,responsive:!0,layout:"undocked-horizontal",children:[Object(x.jsx)(a.e,Object(s.a)({},C)),Object(x.jsx)(a.e,Object(s.a)({},E)),Object(x.jsx)(a.e,Object(s.a)({},T)),Object(x.jsx)(a.a,{}),Object(x.jsx)(a.b,{}),Object(x.jsx)(a.o,{})]})}),Object(x.jsx)(a.g,{children:Object(x.jsx)(a.i,{css:"width: 20vh; height: 5vh",marginLeft:"1rem",value:O,onChange:function(e){m(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&(L(O),m(""))},placeholder:"Message all attendees"})})]})})]})},w=document.getElementById("root");Object(r.createRoot)(w).render(Object(x.jsx)(c.StrictMode,{children:Object(x.jsx)(i.a,{theme:a.q,children:Object(x.jsx)(a.l,{children:Object(x.jsx)(v,{})})})}))}},[[547,1,2]]]);
//# sourceMappingURL=main.f139987f.chunk.js.map